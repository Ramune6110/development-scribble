https://app.path.progate.com/articles/commit-message-convention

GitHub Flow に寄せて「複雑にしすぎない」前提で、いまの案をうまく整えるなら **“長生きするブランチを main だけにする”** のが一番効きます。いまの `develop/...` は GitHub Flow というより Git Flow 寄りになりやすいので、**develop 系は原則なくす**のをおすすめします（「開発対象/フェーズ」はブランチではなく *Issue/PR のメタ情報* で管理するとシンプルになります）。

---

## ブランチルール（GitHub Flow寄り・最小構成）

### 1) 基本

* `main`：常にデプロイ可能（＝壊れてない）
* それ以外は **短命ブランチ**（PRを出して main に戻したら削除）

### 2) ブランチ命名規則（おすすめ）

**形式**

* `feature/<対象>/<大項目>-<アイテム>-<短い説明>`
* `fix/<対象>/<短い説明>`
* `chore/<対象>/<短い説明>`（リファクタ・依存更新・ビルド設定など）
* `docs/<対象>/<短い説明>`（ドキュメント）

**文字ルール**

* すべて小文字、区切りは `-`（日本語は避けると事故が減る）
* 可能なら Issue 番号を先頭に入れる：`feature/api/123-user-auth-login`

**例**

* `feature/app/ui-settings-page`
* `feature/api/123-add-user-profile`
* `fix/app/crash-on-startup`
* `chore/infra/bump-node-versions`
* `docs/app/update-readme-setup`

> あなたの「開発対象/開発フェーズ」は、ブランチ階層で持つより
> **Issue ラベル（例：target:app / phase:design / phase:impl）** や **PRラベル** に寄せると運用が軽いです。

---

## PR運用ルール（GitHub Flowの肝）

* ブランチを切ったら **早めに Draft PR**（進捗共有とCIを回す）
* **1 PR = 1目的**（レビュー可能なサイズに）
* `main` への取り込みは PR 経由のみ
* マージ方式はおすすめ順にどれかで統一

  * **Squash merge（おすすめ）**：コミットが散らかりにくい
  * Rebase merge：履歴をきれいにしたいチーム向け
  * Merge commit：分岐の形を残したい場合のみ
* マージ後はブランチ削除（自動削除ON推奨）

（可能なら）`main` ブランチ保護：

* 直接push禁止
* PR必須
* CI必須
* review 1名以上 など

---

## コミットルール（いまの add/fix を自然に拡張）

あなたの

* `add`：追加
* `fix`：バグ修正
  は分かりやすいです。運用をラクにするなら **Conventional Commits 風**に寄せるのが無難で、`add` は一般的に `feat` と呼ばれます。

### 1) コミットメッセージ形式（おすすめ）

`<type>(<scope>): <要約>`

* `type`：変更の種類
* `scope`：対象（任意。`app`, `api`, `infra` など）
* 要約：命令形・1行で（日本語でもOK）

### 2) type の最小セット（迷わない）

* `feat`：機能追加（= あなたの add）
* `fix`：バグ修正
* `chore`：雑務（依存更新、設定、生成物整理）
* `docs`：ドキュメント
* `refactor`：挙動を変えない整理
* `test`：テスト追加・修正

### 3) 例

* `feat(app): 設定画面に通知トグルを追加`
* `fix(api): ユーザー取得でnull参照になる問題を修正`
* `refactor(app): 設定周りのコンポーネントを分割`
* `chore(infra): ciのnodeを20に更新`
* `docs: セットアップ手順を追記`

### 4) 追加で決めると強い小ルール

* 1コミットは「1つの意図」
* WIPを残すなら `chore: wip` ではなく **Draft PRで吸収**（コミットは意味ある単位で）
* マージ方式を Squash にするなら、コミットは多少ラフでも **最終的にPRタイトル/説明が綺麗**ならOK（運用が軽い）

---

## 「開発フェーズ」をどう表現するか（ブランチを増やさずに）

ブランチ階層にフェーズを埋める代わりに、次のどれかが楽です：

* Issue/PR ラベル：`phase:design / phase:impl / phase:test`
* GitHub Projects のステータス
* PR の prefix：`[Design] ...` / `[Impl] ...`（ラベルの方が管理しやすい）

---

必要なら、あなたの「開発大項目/開発アイテム」の粒度（どのくらいの階層が実務で回ってるか）に合わせて、**ブランチの階層を2階層までに圧縮**した版（例：`feature/<対象>-<短い説明>`）も提案できます。

いい感じです。運用しやすくするなら、いくつかだけ“型”を固定すると迷いが減ります。

## その案を整えたおすすめ形

**基本形**

* `feat(<変更モジュール名>): <変更内容>`

  * 例：`feat(auth): ログイン時にトークン更新を追加（期限切れ対策）`

※ `【feat】` みたいな角括弧でも動きますが、一般的には `feat(...)` の形のほうがツール（自動リリースノート生成等）と相性が良いです。

## 「変更内容」の書き方ルール（シンプル版）

* 1行で完結（長くても60〜80文字くらい）
* “何をしたか” を先頭に置く（理由は末尾か括弧）
* 「何のために/どこを/何を」全部を毎回入れようとすると長くなるので、**必須は「何を」だけ**にして、必要なときだけ理由を足すのがバランス良いです。

**例**

* `feat(ui): 設定画面に通知トグルを追加`
* `feat(api): ユーザー一覧にページングを実装（負荷低減）`

## type（最低限これだけで回る）

* `feat`：機能追加
* `fix`：バグ修正
* `refactor`：挙動変えず整理
* `chore`：依存更新/設定/雑務
* `docs`：ドキュメント
* `test`：テスト

## モジュール名（scope）の決め方のコツ

* リポジトリで頻出する“境界”に合わせる（例：`ui`, `api`, `db`, `auth`, `infra`）
* 迷うなら `app` / `server` / `infra` の3つから始めるのもアリ
* **複数またぐ変更**は `core` や `global` みたいな逃げ道を1つ作っておくと運用が止まりません

---

この形でいくなら、あなたの書き方をそのまま活かして

> `feat(<変更モジュール名>): <どこの何をしたか>（必要なら理由）`

に寄せるのが一番スムーズです。
