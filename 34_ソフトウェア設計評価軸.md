# 評価軸の定義・指標・採点目安（0–3点）

## 1) 保守性（Maintainability）

* **定義**：既存仕様の修正・バグ修正・軽微変更への追随のしやすさ。
* **主指標（例）**

  * 変更の局所性：代表変更S1/S2で「修正**モジュール数**／**ファイル数**」
  * 依存の健全性：新規**依存追加数**、**循環依存の有無**
  * テスト容易性：S1を**UTのみで再現**可か、**モック点数**、観測点の有無
* **採点目安**

  * **3**：S1/S2が**1–2モジュール**で完結、UTで再現可、循環なし
  * **2**：3–4モジュール、軽微な統合確認が必要
  * **1**：5モジュール以上、統合環境がほぼ必須
  * **0**：横断的に広範囲、設計変更から必要

## 2) 拡張性（Extensibility）

* **定義**：新機能を既存を壊さずに追加できる度合い。
* **主指標（例）**

  * 拡張点の明示：Strategy/Plugin/Hook/イベント等**差し込み口の有無と粒度**
  * I/Fの余白：**後方互換**拡張（フィールド追加、バージョニング）方針
  * 既存影響：新機能S3追加時の**既存I/F破壊**の要否、**再デプロイ範囲**
* **採点目安**

  * **3**：新機能は**新規モジュール＋設定**で有効化、既存改変ほぼゼロ
  * **2**：既存I/Fに**非破壊追加**で対応可能
  * **1**：**破壊的変更**が一部必要
  * **0**：広範囲の破壊的変更が前提

## 3) 再構築容易性（Replaceability / Reworkability）

* **定義**：内部の作り直し（アルゴリズム交換・データストア入替 等）を**契約は保ったまま**実施できる度合い。
* **主指標（例）**

  * 契約の安定：公開**API/イベント契約**を変えずに内部差し替え可能か
  * 依存方向：詳細→方針の**依存逆転**が守れているか（詳細が外部に漏れていない）
  * データ移行の分離：**移行が境界内**で完結するか
* **採点目安**

  * **3**：差し替えが**境界内**で完了、外部影響ゼロ
  * **2**：外部は**設定や適応レイヤ**の追加で吸収可能
  * **1**：外部契約の**小変更**が必要
  * **0**：全層に波及

## 4) 移植性（Portability）

* **定義**：プラットフォーム／ランタイム／クラウド／DB等の**基盤変更**への耐性。
* **主指標（例）**

  * 固有依存の隔離：固有APIの**占有率**、アダプタ層の有無
  * ビルド/実行の抽象：**コンテナ化**、CIでの**複数ターゲット**検証
  * 設定分離：環境差分を**設定**で吸収できるか
* **採点目安**

  * **3**：固有依存は外縁に隔離、CIで**2+ターゲット**通過
  * **2**：固有依存は一部残るがアダプタで吸収可能
  * **1**：中核に固有依存あり、移植には**小改修以上**
  * **0**：広範囲に固有直結、ほぼ作り直し

> 推奨：この4軸の**重み**は「保守=2, 拡張=2, 再構築=2, 移植=1」から開始し、プロジェクト事情で微調整。
> なお **性能・信頼性・セキュリティ**は**足切り**（達成/未達）で管理するのが無難です。

---

# 比較評価マトリクス（テンプレート）

**前提（例）**

* 代表シナリオ：

  * S1 既存機能の軽微変更／S2 新機能追加／S3 基盤変更（DBや実行環境）
* 重み：保守2, 拡張2, 再構築2, 移植1
* 足切り：性能(◎/△/×), 信頼性(◎/△/×), セキュリティ(◎/△/×)

### 採点表（0–3点、S1–S3で評価して平均でも可）

| 案 | 保守性(×2) | 拡張性(×2) | 再構築(×2) | 移植性(×1) | 重み付き合計 | 足切り(性能/信頼/セキュ) | 主要リスク・備考 |
| - | ------: | ------: | ------: | ------: | -----: | :------------: | :------- |
| A |      __ |      __ |      __ |      __ |     __ |  __ / __ / __  | …        |
| B |      __ |      __ |      __ |      __ |     __ |  __ / __ / __  | …        |
| C |      __ |      __ |      __ |      __ |     __ |  __ / __ / __  | …        |

> 書き方のコツ：各軸の右下に**証拠**（修正モジュール数、依存増分、UT再現可否、CI結果など）を1行でメモすると説得力が上がります。

---

# 記入例（仮想ケース）

**ユース**：既存アプリに「通知ロジック」を導入

* **案A**：既存アプリの通知サービスに**内包**
* **案B**：既存I/Fを**非破壊拡張**（通知ハンドラを追加）
* **案C**：**新規モジュール**（通知エンジン）を独立配置し、イベントで接続

**採点（根拠は各セルの下に簡潔に）**

| 案             |                           保守性(×2) |              拡張性(×2) |                 再構築(×2) |                    移植性(×1) |                     **重み付き合計** | 足切り(性能/信頼/セキュ) | 主要リスク・備考          |
| ------------- | --------------------------------: | -------------------: | ----------------------: | -------------------------: | -----------------------------: | :------------: | :---------------- |
| **A 内包**      | **2**（S1で2ファイル、循環なし。S2はUT+最小ITで可） |     **1**（差し込み口が乏しい） |      **1**（内部交換は既存と密結合） |        **2**（基盤依存は薄いが部分直結） | **10** = 2×2 + 1×2 + 1×2 + 2×1 |      ◎/◎/◎     | 肥大化による理解コスト       |
| **B I/F拡張**   |              **2**（変更は通知周辺3モジュール） | **3**（ハンドラ追加のみで新機能可） | **2**（契約維持。内部交換は適応層で吸収） | **1**（I/Fにプラットフォーム前提が少し残る） | **15** = 2×2 + 3×2 + 2×2 + 1×1 |      ◎/◎/◎     | I/F拡張の周知・互換性検証が必要 |
| **C 独立モジュール** |              **1**（運用・監視の追加で学習必要） |   **3**（イベント購読で追加容易） |      **3**（外部契約固定で内部自由） | **3**（固有依存は外縁に隔離、CIで2環境通過） | **17** = 1×2 + 3×2 + 3×2 + 3×1 |      ◎/◎/◎     | 初期導入コスト・運用の複雑化    |

**この例の示唆**

* 合計は **C > B > A**。Cは導入コストが上がる一方、**拡張・再構築・移植**の将来余地が最も高い。
* Bは**互換性を壊さず**に段階導入できる中庸案。
* Aは**短期のシンプルさ**はあるが、将来の追加・入替に弱い。

---

## 使い始める手順（超短縮）

1. 上の4軸表を**そのまま貼る** → プロジェクト向けに一言ずつ調整
2. **S1/S2/S3**をあなたの案件に合わせて1行で定義
3. 各案を**0–3点で採点** → 上のテンプレに転記
4. 足切り（性能/信頼/セキュ）を○×評価 → **最終決定＋一行理由**を書く

必要なら、あなたのA/B/C案の概要を教えてください。テンプレに**数値（修正モジュール数、依存増分、CIターゲット数など）**を埋めて完成版マトリクスを作成します。
