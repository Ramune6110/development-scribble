# 飛行ロボット自律航行制御プロジェクト

## 1. システム初期化＆通信基盤構築

### Situation

STM32F103 ベースの飛行ロボットで、リアルタイムなセンサ取得と無線／RC 信号の送受信を同時に安定動作させる必要があった。

### Task

* 割り込み・タイマ駆動で 1 kHz のセンサ取得と 20 Hz の制御ループを実現
* XBee（無線）と RC 受信パルスをノンブロッキングで扱う通信スタックを自作

### Action

1. **ボード初期化（`BoardInit()` / `GPIO_Configuration()`）**
2. **SysTick & TIM 割り込み設定**

   * 1 kHz センサ更新：TIM5
   * PID 制御ループ：TIM6
3. **NVIC（割り込み優先度）設定**
4. **USART1＋DMA** で XBee 無線モジュールとの非同期通信
5. **EXTI ハンドラ** で受信パルス幅測定 → RC コントロール信号に変換
6. **I2C1／I2C2 ドライバ** 実装で各種センサと通信

### Result

* センサ取得→姿勢推定→制御→サーボ駆動まで、すべて割り込みドリブンで安定動作
* XBee 経由と RC 両方の入力がリアルタイムに反映され、遠隔／自律どちらの操作も可能に

### マッチする応募要件

* **C/C++言語を使用した…開発経験**
* **組込みシステムの開発経験（ベアメタル、割り込み／タイマ）**
* **ネットワーク技術に関する…プログラム経験（XBee, シリアル, I2C）**

---

## 2. 姿勢推定（Sensor Fusion & AHRS）

### Situation

加速度／ジャイロ／地磁気／気圧センサを組み合わせ、ドリフトやノイズに強い姿勢推定が求められた。

### Task

* センサ生データを毎秒1,000回取得し、MadgwickAHRS アルゴリズムで φ（ロール）/ θ（ピッチ）/ ψ（ヨー）をリアルタイム算出

### Action

1. I2C バースト読み出しルーチンで MPU6000/MAG3110/BMP280 を取得
2. `MadgwickAHRS()` と `MadgwickAHRS_IMU()` を C 言語で移植
3. クォータニオン正規化と三角関数演算でノイズ除去
4. 1 kHz 割り込みループ内で毎回更新

### Result

* ドリフトを抑えつつ ±0.5°以内の精度で姿勢推定
* 自律航行制御のフィードバック基盤として安定稼働

### マッチする応募要件

* **C/C++言語を使用した…開発経験**
* **組込みシステムの開発経験（ベアメタル＋数学的アルゴリズム実装）**
* **コンピュータサイエンス基礎（アルゴリズム・データ構造・数学）**

---

## 3. 自律飛行用 PID 制御＆モード切替

### Situation

「水平飛行」「旋回」「八の字飛行」「自動離着陸」など、多様な飛行モードを安定制御しなければならない。

### Task

* 各モードごとの目標姿勢・スロットル値を PID 制御で追従
* RC スイッチ操作でモード切替、かつフェイルセーフ（例：通信途絶時はホバリング）

### Action

1. `PID_Controller()`／`PID_Roll_Controller()` など複数の制御関数を実装
2. TIM6 割り込み（20 Hz）で常に最新姿勢と目標差分を計算
3. モード切替ロジックを EXTI IRQ 内で管理し、`ControlMode` を更新
4. 異常時のロールバック処理／LED インジケータで状態フィードバック

### Result

* 全モードで安定した制御応答を実証
* コンテスト本番にて自律ミッション（指定飛行経路のクリア）に成功

### マッチする応募要件

* **C/C++言語を使用した…開発経験**
* **組込みシステムの開発経験（リアルタイム制御・タイマ／割り込み）**
* **自走的に課題を発見・解決する姿勢**

---

### まとめ

この飛行ロボット自律航行制御プロジェクトは、特に以下の応募要件と高い親和性があります：

* **C/C++ プロダクト開発経験**
* **ベアメタル組込み開発（割り込み・タイマ・I/O）**
* **ネットワーク／通信技術（シリアル, I2C, XBee）**
* **アルゴリズム実装能力（MadgwickAHRS, PID）**
* **自走的開発マインド**

## プロジェクト概要（統合 STAR）

| 要素            | 内容                                                                                                                                                                                                                                                                                                                                                    |
| ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Situation** | 大学の飛行ロボットコンテストで、STM32F103VET6 ベースの機体に対し、<br>・高精度な姿勢推定<br>・多様な飛行モードの自律制御<br>・遠隔／RC 信号との並列処理<br>を同時に実現する制御ソフトを開発する必要があった。                                                                                                                                                                                                                               |
| **Task**      | 1. ベアメタル上でリアルタイムに<br> – センサ（MPU6000/MAG3110/BMP280）取得 (1 kHz)<br> – 姿勢推定 (MadgwickAHRS)<br> – PID 制御ループ (20 Hz)<br>2. XBee 無線＆RC 受信の通信処理<br>3. 複数飛行モード（水平／旋回／八の字／離着陸）の切替・安全停止機構の実装                                                                                                                                                                    |
| **Action**    | - **ボード初期化／割り込み設定**<br>  `BoardInit()`, `GPIO_Configuration()`, NVIC 優先度設定<br>  `SysTick` と各 TIM（5→1 kHz, 6→20 Hz）で割り込みループ<br>- **通信ドライバ**<br>  USART1＋DMA で XBee、EXTI ハンドラで RC パルス幅計測、I2C1/2 でセンサ取得<br>- **姿勢推定**<br>  MadgwickAHRS を C 言語で移植・最適化<br>- **PID 制御＆モード切替**<br>  `PID_Controller()`, `PID_Roll_Controller()` 実装、`ControlMode` 管理＆フェイルセーフ |
| **Result**    | - センサ→推定→制御→舵面出力のエンドツーエンドが安定稼働<br>- ±0.5°以内の姿勢精度と応答性を実証<br>- コンテスト本番で自律飛行ミッションを成功、チーム内で開発品質を高く評価される                                                                                                                                                                                                                                                   |

---

## マッチング概要

| 応募要件                                | プロジェクト内での具体例                                         |
| ----------------------------------- | ---------------------------------------------------- |
| **C/C++言語を使用した３年以上の開発経験**           | ベアメタル C コード (\~3,000 行) でモジュール化＋割り込み／DMA を多用         |
| **組込みシステム開発（ベアメタル、ブート／OS カーネル）**    | 割り込み／TIM 駆動による 1 kHz／20 Hz ループ、スタートアップ＆NVIC 設定       |
| **ネットワーク技術（実務・プログラム経験）**            | USART1＋DMA で XBee 無線、EXTI で RC 受信パルス、I2C1/2 で各種センサ通信 |
| **コンピュータサイエンスまたは関連学士号**             | MadgwickAHRS（クォータニオン＋勾配降下）、PID 制御、三角関数・線形代数の実装       |
| **英語でのコミュニケーション能力**                 | 英語コメント入りヘッダ、GitHub README 英語併記で公開                    |
| **ソフトウェアアップデート開発経験**                | ―（対象外）                                               |
| **アジャイル／スクラムでの開発経験**                | ―（対象外）                                               |
| **CI/CD の実務経験**                     | ―（対象外）                                               |
| **暗号化や署名など基本的セキュリティ知識**             | ―（対象外）                                               |
| **ISO 21434／ISO 26262 の知識**         | ―（対象外）                                               |
| **MISRA C/C++ & AUTOSAR C/C++ の知識** | ―（対象外）                                               |
| **自らコーディング好き・製品搭載喜び**               | コンテスト機体に同コードを投入・成功体験                                 |

---
