## DRBFMはV字のどこでやるべき？

DRBFMは「工程（フェーズ）の1つ」というより、**変更点・新規点があるときに、設計レビューとして差し込む活動**です。主戦場はV字左側の設計工程で、特に：

* **基本設計（外部設計）の途中〜凍結前**：外部仕様・業務ルール・外部IFの“契約”が固まる前に、変更点が引き起こす不具合を議論で潰す
* **詳細設計（内部設計）の途中〜凍結前**：モジュール分割、DB物理、排他、例外処理など“実装に直結する変更点”を潰す
* **実装の前（設計完了ゲート）**：DRBFMで出た懸念をテスト計画（単体/結合/システム）に落として漏れを防ぐ

要するに、**「設計を固める前（凍結前）」にやるのが基本**で、変更が入ったらその都度回します。DRBFMは「変更点・変化点に着目して問題を未然防止する」考え方が核です。([コアコンセプト・テクノロジー（CCT）][1])

---

## DRBFMとは何か？

DRBFM（Design Review Based on Failure Mode）は、**新規点・変更点（変化点）に焦点を当てて、潜在不具合（故障モード）を“良い議論”で顕在化し、対策と検証に落とす設計レビュー手法**です。トヨタ発の考え方として紹介されることが多く、単なるチェックリスト型レビューではなく「議論」を重視します。([九大コレクション][2])

### FMEAとの関係（超要点）

* **FMEA**：製品/プロセス全体を俯瞰して故障モードを洗い出す（範囲が広い）
* **DRBFM**：**変更点**に絞り、変更が持ち込むリスクを深掘りする（特に変更開発で効く）([コアコンセプト・テクノロジー（CCT）][1])

---

## どういう観点・プロセスで進める？

ソフト/システム開発にもそのまま当てはめられる定番の流れは以下です（「変更点→懸念→対策→検証」）。

1. **対象と前提を固定**
   どの機能・範囲・利用条件（性能、同時実行、運用、外部連携）を議論するか決める。

2. **変更点・変化点を“列挙”する（ここが命）**
   旧版/現行/類似品と比較して、何が変わったかを洗い出す（仕様、アルゴリズム、パラメータ、インフラ、依存ライブラリ、外部IF、運用手順、想定負荷など）。([skygroup.jp][3])

3. **変更点ごとに「故障モード（起こり得る失敗）」を議論で深掘り**
   典型の観点（例）：

* **機能観点**：期待結果が崩れる／境界条件で破綻する
* **インタフェース観点**：入力の取り違い、互換性、エラー契約違反、タイムアウト
* **状態・遷移観点**：並行実行・リトライで二重処理、順序依存
* **データ観点**：NULL/欠損、型、桁あふれ、整合性、移行
* **非機能観点**：性能劣化、リソース枯渇、可用性、監視・ログ不足、セキュリティ穴
  （DRBFMは“良い議論で潜在問題を見つける”ことが狙いとして強調されます。）([九大コレクション][2])

4. **対策（設計方針）を決め、検証（テスト/解析）に落とす**
   「設計で防ぐ」「検知して止める」「運用で吸収する」などの方針を決め、**必ず検証項目**（単体/結合/システムのどこで、何を、どう測るか）に紐づけます。([skygroup.jp][3])

5. **DRBFMシートで管理し、クローズ条件を明確化**
   懸念が出っぱなしにならないように、担当・期限・検証完了を追跡します（レビューの成果物＝“議論の記録＋検証計画”）。

---

## 成果物（何が残ると「DRBFMやった」と言えるか）

* 変更点リスト（旧→新の差分、前提の変化）
* DRBFMワークシート（変更点×懸念×故障モード×原因×影響×対策×検証）
* 追加のテスト観点/ケース（特に「変更点に刺さる」もの）
* 未決・リスクの追跡表（いつ誰が何でクローズするか）

---

もしあなたの開発が「業務アプリ/API中心」なのか「組込み/制御」なのかで、DRBFMで効く観点（特に非機能・並行性・外部IFの深掘り）が少し変わります。会話を続けるなら、あなたの対象（例：Web/API、バッチ基盤、組込み等）を前提にして、**基本設計DRBFMで見るべき項目／詳細設計DRBFMで見るべき項目**をチェックリスト化して渡せます。

[1]: https://www.cct-inc.co.jp/koto-online/archives/364?utm_source=chatgpt.com "DRBFMとは？正しい進め方やFMEAとの違いを解説"
[2]: https://catalog.lib.kyushu-u.ac.jp/opac_download_md/26064/2915_1547.pdf?utm_source=chatgpt.com "Design Review Based on Failure Mode to visualise reliability ..."
[3]: https://www.skygroup.jp/tech-blog/article/1592/?utm_source=chatgpt.com "DRBFMを活用した設計品質の向上｜Sky Tech Blog（スカイ ..."

DRBFMでいう「背反（＝狙った変更が、別のところで“逆効果”や“破綻”を起こす）」は、**変化点を“反転”して考える**のがコアです。やり方を「再現できる手順」にすると、だいたい次の流れになります。

---

## 背反を洗い出すための具体プロセス（DRBFMの進め方）

### 0) 準備：変化点を1行で書ける状態にする

* 変化点（何を変えるか）
* 目的（何を良くするか：性能/品質/コスト/保守性など）
* 変更前（現状）と変更後（To-Be）の差分
* 前提（成立している想定、依存、制約）

> ここが曖昧だと背反が出ません。「何が変わるか」を細かく分割して列挙します（仕様、データ、IF、運用、性能条件、エラー処理、権限など）。

---

### 1) 「背反のタネ」を作る：反転質問を機械的に回す

変化点ごとに、次の **反転テンプレ** を順番に当てます（会議で口頭でもシートでもOK）。

**A. 目的を反転する**

* 「速くする」→ **遅くなるのはどんな時？**（ピーク、リトライ、キャッシュミス、外部遅延）
* 「安全にする」→ **安全が崩れる抜け道は？**（権限漏れ、例外経路、ログ欠落）
* 「簡単にする」→ **運用が複雑化する点は？**（設定増、手順増、監視増）

**B. 前提を反転する（DRBFMで一番効く）**

* 前提「入力は整っている」→ **入力が壊れていたら？**（NULL、桁溢れ、文字化け、順序違い）
* 前提「順序は守られる」→ **順序が入れ替わったら？**
* 前提「1回しか来ない」→ **二重送信・リトライされたら？**
* 前提「単一実行」→ **並行実行されたら？**
* 前提「依存先は安定」→ **依存先が遅い/落ちる/仕様変更したら？**

**C. 境界・極端化で壊す**

* 最小/最大、0件/大量、期限ギリギリ、タイムアウト直前、同時実行MAX、ディスク逼迫、メモリ逼迫

**D. “周辺との整合”を崩す**

* 他機能/他画面/他バッチと **状態やデータが食い違ったら？**
* 監視・ログ・アラートが **出ない経路** が増えないか？
* 移行（旧データ）やロールバックをすると **整合が崩れないか？**

このA〜Dを回すと、「背反＝懸念」の候補が自然に出ます。

---

### 2) 背反を「故障モード」に落とす（1件ずつ短く）

出てきた懸念を、次の形にして明確化します。

* **起点（何が起こる）**：例）リトライが同時に走る
* **メカニズム（なぜ壊れる）**：例）排他がなく二重計上
* **影響（何が困る）**：例）請求が二重、監査NG
* **検出（どう気づく）**：例）監視メトリクス/ログ/整合チェック
* **防止（どう潰す）**：例）冪等キー、トランザクション境界、排他、制約

> 「懸念」を“気持ち”のままにせず、必ず **起点→原因→影響** にします。ここが設計対策に直結します。

---

### 3) 対策の出し方（背反への打ち手パターン）

背反に対する対策は、基本この5種類に分類できます（漏れにくい）。

1. **予防**：起きない設計（排他、冪等、バリデーション、制約、タイムアウト設計）
2. **検知**：起きたら分かる（ログ、メトリクス、アラート、整合性チェック）
3. **縮退**：壊れても致命にしない（フォールバック、リトライ制御、レート制限）
4. **隔離**：影響範囲を閉じる（サーキットブレーカ、キュー分離、権限境界）
5. **復旧**：戻せる（ロールバック手順、データ修復、再実行可能な設計）

---

### 4) 最後に「検証」に落とす（DRBFMのゴール）

各対策に対して必ず「どう確かめるか」を紐づけます。

* 単体：分岐・例外・境界値
* 結合：IF・状態遷移・並行・リトライ
* システム：性能・可用性・運用（監視/アラート）・障害注入
* 受入：業務観点のOK/NG（受入基準）

DRBFMはここまで落ちて初めて「やった意味がある」状態になります。

---

## “背反を出す”ための進行のコツ（実務）

* **変更点を細分化**してから議論（大きいままだと抽象論になる）
* 参加者を固定：**設計者（説明）＋モデレータ（背反質問）＋周辺領域の有識者（運用/DB/性能/セキュリティ）**
* 背反は「否定」ではなく**リスクの顕在化**と位置づける（議論が荒れにくい）
* 1件の背反に時間を使いすぎず、まず **広く出してから** 深掘り・優先度付け

---

## すぐ使える「背反質問リスト」（システム設計向け）

* これを入れると **遅くなる/重くなる** 条件は？
* これを入れると **一貫性が崩れる** 条件は？（二重処理、順序逆転、部分失敗）
* **入力が悪い** とき、どこまで拒否してどこまで吸収する？
* **外部が落ちた/遅い** とき、どう振る舞う？（待つ/諦める/縮退）
* **運用が間違えた** とき（設定ミス、手順抜け）、壊れ方は？
* **監視できない失敗** が増えていないか？
* **移行・ロールバック** で破綻しないか？

---

必要なら、あなたが想定している「織り込む仕様（変化点）」を1〜2個だけ（箇条書きで）貼ってください。上の手順に沿って、**背反の洗い出し→故障モード化→対策→検証項目**まで、具体例としてそのままDRBFMシートっぽい形に落として返します。
